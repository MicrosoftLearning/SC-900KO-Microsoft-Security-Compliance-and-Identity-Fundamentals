---
lab:
    title: 'Azure Policy 살펴보기'
    module: '모듈 4 단원 5: Microsoft 규정 준수 솔루션의 기능 설명: Azure Policy 설명'
---


# 랩: Azure Policy 살펴보기

## 랩 시나리오
Azure Policy를 사용하면 조직의 표준을 적용하고 규정 준수를 대규모로 평가할 수 있습니다. Azure Policy는 해당 리소스의 속성을 비즈니스 규칙과 비교하여 Azure의 리소스를 평가합니다. 이 랩에서는 먼저 Azure Policy 방문 페이지를 살펴봅니다. Azure Policy 페이지를 처음으로 살펴본 후에는 정책을 만들고 해당 정책의 영향을 확인합니다.


**소요 시간**: 20-25분

#### 작업 1: Azure Policy 페이지를 간략하게 살펴봅니다.

1. Microsoft Edge를 엽니다. 주소 표시줄에 **portal.microsoft.com**을 입력합니다.

1. 관리자 자격 증명으로 로그인합니다.
    1. 로그인 창에 **admin@WWLxZZZZZZ.onmicrosoft.com**을 입력하고(여기서 ZZZZZZ는 랩 호스팅 공급자가 제공한 고유 테넌트 ID) **다음**을 선택합니다.
    
    1. 랩 호스팅 공급자가 제공한 관리자 암호를 입력합니다. **로그인**을 선택합니다.
    1. 로그인 상태를 유지할지 묻는 메시지가 표시되면 **예**를 선택합니다.

1. 이제 Azure Portal이 표시됩니다.  검색 상자(페이지 위쪽의 'Microsoft Azure' 옆에 있는 파란 막대)에 **policy**를 입력하고 검색 결과에서 **Policy**를 선택합니다. 그러면 정책 홈 페이지가 열리고 대시보드 보기가 표시됩니다.  정보가 표시되는 범위에는 이 랩용으로 사용 중인 Azure Pass가 적용됩니다.   대시보드에서 제공되는 정보를 살펴봅니다.

1. 범위가 Azure Pass – 스폰서쉽으로 되어 있는 ASC 기본값(ASC는 Azure Security Center를 의미하는데 이제는 클라우드용 Microsoft Defender라고 불림)이라는 항목이 있습니다.   **ASC 기본값**을 선택합니다.

1. 페이지 위쪽의 필수 아래에서 이름, 설명 및 기타 필수 정보를 확인할 수 있습니다.  설명을 확인합니다(설명 위에 마우스를 올리면 확인 가능). 참고: 설명 필드에서는 Azure Security Center라고 표현하지만, 이 브랜드는 클라우드용 Microsoft Defender로 바뀌었습니다.

1. 대시보드에서 제공되는 정보는 선택한 항목인 ASC 기본값 이니셔티브 정의를 반영하여 업데이트됩니다.  이니셔티브 정의는 하나의 중요한 목표를 달성하도록 설계된 정책 정의의 컬렉션입니다. 그룹, 정책, 비준수 리소스 또는 이벤트별로 정보를 확인할 수 있습니다.

1. 페이지 오른쪽 위 모서리에서 **X**를 선택하여 ASC 페이지에서 나가고 정책 홈 페이지로 돌아갑니다.

1. 왼쪽 탐색 패널에서 **시작하기**를 선택합니다.  그러면 기본 제공 정책을 찾아보고 대규모로 정책을 할당하는 옵션 등의 여러 옵션을 확인할 수 있습니다. 환경에 적합한 사용자 지정 정책 정의를 만들거나 정책 할당을 추천하는 등의 다양한 작업을 수행할 수 있습니다.

1. 왼쪽 탐색 패널에서 **준수**를 선택합니다.  개요 페이지와 마찬가지로 준수 페이지에서도 목록에 포함된 정책 및/또는 이니셔티브의 준수 상태를 확인할 수 있습니다.  정책 준수 페이지에서는 정책이나 이니셔티브를 할당할 수도 있습니다(다음 작업에서 정책을 할당할 예정임).

1. 왼쪽 탐색 패널에서 **업데이트 관리**를 선택합니다.  이 페이지에서는 비준수 리소스가 있는 정책 목록이 제공됩니다.  업데이트 관리 페이지에서 정책을 선택하면 정책 업데이트 관리 작업 작성을 트리거할 수 있습니다.  

1. 왼쪽 탐색 창의 제작 아래에서 **할당**을 선택합니다.  여기서는 현재 정책 및/또는 이니셔티브 할당을 확인할 수 있으며 정책 할당이나 이니셔티브를 만들 수 있습니다.  다음 작업에서 이 페이지를 다시 사용할 것입니다.  

1. 왼쪽 탐색 패널에서 **정의**를 선택합니다.  이 페이지에서 **안전하지 않은 암호 보안 설정을 사용하는 컴퓨터 감사**를 선택합니다.  이 이니셔티브 정의에는 여러 정책이 포함되어 있습니다.  정책 정의 구조를 살펴보려면 **최대 암호 사용 기간이 70일이 아닌 Windows 컴퓨터 감사**를 선택합니다.  페이지가 열리면 JSON(Java Script Object Notation) 구조로 된 실제 정책 정의를 확인할 수 있습니다.   빨간색 텍스트에서 확인할 수 있는 것처럼, 정책 정의에는 표시 이름, 설명, 매개 변수, 정책 규칙 등을 정의하는 요소가 포함되어 있습니다. 아무 항목도 변경하지는 마세요.  

1. 페이지 오른쪽 위에서 **X**를 선택하여 정책 정의 페이지를 종료합니다.

1. 페이지 오른쪽 위에서 **X**를 선택하여 이니셔티브 정의 페이지를 종료합니다.

1. 다음 작업을 위해 이 브라우저 탭(정책 - Microsoft Azure)을 열어 두세요.

#### 작업 2:  이 작업에서는 리소스 그룹에서 태그를 사용해야 하도록 지정하는 기본 정책 할당을 만듭니다.

1. 정책 - Microsoft Azure 브라우저 탭을 엽니다.

1. 왼쪽 탐색 패널의 작성 아래에서 **할당**을 선택합니다.

1. 페이지 위쪽에서 **정책 할당**을 선택합니다.

1. 관리자에게 정책 할당 프로세스를 안내하는 정책 할당 마법사가 열립니다.  정책 정의 필드 옆의 **줄임표**를 선택합니다.  사용 가능한 정책 정의 목록이 제공됩니다.  

1. 검색 창에 **태그**를 입력합니다.

1. 검색 결과에서 **리소스 그룹에 태그 필요**를 선택하고(아래쪽으로 스크롤해야 할 수 있음) 선택을 누릅니다.  참고: 이 정책을 적용하면 요구 **사항**을 충족하지 않는 새 리소스 그룹 만들기가 거부됩니다.  

1. 기본 할당 이름을 확인합니다.  이름은 그대로 두고 페이지 아래쪽에서 **다음**을 선택합니다.

1. 태그 이름 필드에 **환경**을 입력하고 **다음**을 선택합니다.  

1. 비준수 메시지에 **환경 태그가 필요함**을 입력하고 **다음**을 선택합니다. 참고: 정책 할당 전에 만들었으며 환경 태그가 지정되어 있지 않은 리소스 그룹에 비준수 이유로 이 메시지가 표시됩니다.  정책을 만든 후에 만드는 리소스 그룹의 경우에는 환경 태그가 없으면 리소스 그룹 만들기가 거부됩니다.

1. 정책 할당을 검토하고 만들기를 선택합니다.  정책이 바로 표시되지 않으면 **새로 고침**을 선택합니다. 참고: 정책이 적용되려면 최대 30분이 걸릴 수 있습니다.

1. 화면 오른쪽 위 모서리에서 **X**를 선택하여 정책 할당 페이지를 종료합니다.

1. 그러면 Azure 서비스 홈 페이지가 표시됩니다.  다음 작업에서 사용할 것이므로 해당 페이지를 열어 두세요.

#### 작업 3:  이 작업에서는 Azure Policy 할당의 영향을 확인합니다. 구체적으로는 Azure에서 태그가 없는 리소스 그룹을 만든 후 태그를 포함하도록 해당 리소스 그룹을 업데이트합니다.  참고: 이전 작업에서 만든 정책이 적용되려면 최대 30분이 걸릴 수 있습니다. 하지만 일반적으로는 정책이 더 빨리 적용됩니다.

1. 브라우저 탭에서 홈 - Microsoft Azure를 엽니다.

1. 페이지 위쪽의 Azure 서비스 아래에서 **리소스 그룹**을 선택합니다.

1. 페이지 왼쪽 위 모서리에서 **+ 만들기**를 선택합니다.

1. 리소스 그룹 만들기의 기본 탭에서 구독 필드의 값은 현재 값인 Azure Pass - 스폰서쉽으로 유지합니다.

1. 리소스 그룹 필드에 **SC900-Labs**를 입력합니다.

1. 지역 설정은 기본값으로 유지하고 **다음: 태그**를 선택합니다.

1. 태그 이름과 값 필드는 비워 둡니다.  해당 필드에 내용을 입력하지 마세요. 다음으로 **검토 + 만들기**를 선택합니다.

1. 그러면 유효성 검사에 통과했다는 메시지가 표시됩니다(마법사에서 태그 이름 및 값은 필수 필드가 아님). **만들기**를 선택합니다.

1. "리소스 그룹을 만들지 못했습니다. 오류 세부 정보 보기"라는 오류 메시지가 화면 위쪽에 표시됩니다.  **오류 세부 정보 보기**를 선택합니다. Azure 정책에 포함된 조건이 충족되지 않았으므로 비준수 사항으로 인해 리소스 그룹 만들기가 거부되었습니다. 참고: 오류 메시지가 표시되지 않고 리소스 그룹이 만들어졌다면 정책이 아직 적용되지 않았기 때문입니다.  이전 작업에서 만든 정책의 정책 페이지로 이동합니다. 정책이 적용되면 해당 리소스가 규정을 준수하지 않음이 표시됩니다.  그리고 세부 정보 페이지에 비준수 메시지가 표시됩니다.

1. 오류 요약에는 오류 유형으로 "정책에서 'SC900-Labs' 리소스를 허용하지 않았습니다."가 표시됩니다.  화면 왼쪽 위 모서리에서 **X**를 선택하여 이 창을 닫습니다.

1. 리소스 그룹 만들기 창에서 **<이전**을 선택합니다.

1. 그러면 리소스 그룹 만들기의 태그 페이지가 다시 표시됩니다.  이름 필드에 환경을 입력하고 값 필드에 **SC900-Labs**를 입력한 후에 **다음: 검토 + 만들기 >** 를 선택합니다.

1. 태그를 확인하고 **만들기**를 선택합니다.

1. 그러면 리소스 그룹이 목록에 표시됩니다.  리소스 그룹에 태그를 제공했으므로 Azure 정책의 일부분으로 포함된 조건이 충족되었기 때문입니다.  즉, 해당 리소스 그룹은 정책을 준수하는 상태입니다.

1. 종료하기 전에 Azure Policy를 제거합니다.
    1. 페이지 왼쪽 위에서 홈을 선택하여 Azure 홈 페이지로 돌아옵니다.
    
    1. Azure 서비스 아래에서 Azure Policy를 선택합니다.
    1. 페이지 가운데 부분에 Azure 정책/이니셔티브 할당 목록이 표시됩니다.  리소스 그룹에 태그 필요 정책 할당의 줄임표를 선택하고 할당 삭제를 선택합니다.
    1. 할당 삭제를 확인하라는 메시지가 표시됩니다.  예를 선택합니다.


#### 복습

이 랩에서는 Azure Policy 방문 페이지를 살펴보았습니다. Azure Policy 페이지를 처음으로 살펴본 후에는 정책을 만드는 프로세스를 진행했으며, 해당 정책의 영향을 확인했습니다.