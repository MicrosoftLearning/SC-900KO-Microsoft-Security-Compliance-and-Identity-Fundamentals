---
lab:
    title: '조건부 액세스를 통한 Azure AD의 액세스 관리 방식 살펴보기'
    module: '모듈 2 단원 3: Microsoft ID 및 액세스 관리 솔루션의 기능 설명: Azure AD의 액세스 관리 기능 살펴보기'
---


# 랩: 조건부 액세스를 통한 Azure AD의 액세스 관리 방식 살펴보기

## 랩 시나리오
이 랩에서는 관리자와 사용자 측면에서 조건부 액세스 MFA를 살펴봅니다.  우선 관리자로 로그인하여 사용자가 클라우드 기반 Microsoft Azure Management 애플리케이션에 액세스할 때 다단계 인증을 진행해야 하도록 지정하는 규칙을 만듭니다.  그런 후에 사용자로 로그인하여 조건부 액세스 정책의 영향을 확인하고, MFA에 등록하는 프로세스를 진행합니다.

**소요 시간**: 10-15분

#### 작업 1: 이 작업에서는 관리자로 로그인하여 Debra Berger 사용자의 암호를 재설정합니다.  이 단계를 진행해야 후속 작업에서 해당 사용자로 처음 로그인할 수 있습니다.

1. Microsoft Edge를 엽니다.  주소 표시줄에 **portal.azure.com**을 입력합니다.

2. 관리자 자격 증명으로 로그인합니다.
    1. 로그인 창에 **admin@WWLxZZZZZZ.onmicrosoft.com**을 입력하고(여기서 ZZZZZZ는 랩 호스팅 공급자가 제공한 고유 테넌트 ID) **다음**을 선택합니다.
    1. 랩 호스팅 공급자가 제공한 관리자 암호를 입력합니다. **로그인**을 선택합니다.
    1. 로그인 상태를 유지할지 묻는 메시지가 표시되면 **예**를 선택합니다.

3. **Azure Active Directory**를 선택합니다.  

4. 왼쪽 탐색 패널에서 **사용자**를 선택합니다.

5. 사용자 목록에서 **Debra Berger**를 선택합니다.

6. 페이지 위쪽에서 **암호 재설정**을 선택합니다. 이전에 Debra Berger로 로그인한 적이 없으므로 이 사용자의 암호를 모르기 때문에 암호를 재설정해야 합니다.

7. 암호 재설정 창이 열리면 **암호 재설정**을 선택합니다.  중요: 다음 작업에서 사용자로 로그인하려면 새 암호가 필요하므로 새 암호를 적어 두세요.

8. 페이지 오른쪽 위에서 X를 선택하여 암호 재설정 창을 닫습니다.

9. 페이지 오른쪽 위에서 X를 선택하여 사용자 창을 닫습니다.

10. 이 창을 계속 열어 두세요.


#### 작업 2:  이 작업에서는 Azure AD에서 조건부 액세스 정책을 만드는 프로세스를 진행합니다.

1. 레이블이 Contoso - Microsoft Azure인 브라우저 탭을 엽니다.   이전에 브라우저 탭을 닫았다면 Microsoft Edge를 열고 주소 표시줄에 portal.azure.com을 입력하여 관리자 자격 증명으로 로그인한 후에 Azure Active Directory를 선택합니다.  

2. 왼쪽 탐색 패널에서 **보안**을 선택합니다.

3. 왼쪽 탐색 패널에서 **조건부 액세스**를 선택합니다.

4. 조건부 액세스 정책 화면이 표시됩니다. 이 화면에는 기존 조건부 액세스 정책의 목록이 표시됩니다. **새 정책**을 선택합니다.

5. 이름 필드에 **MFA 테스트 정책**을 입력합니다.

6. 사용자 및 그룹 아래에서 **0명의 사용자 및 그룹이 선택됨**을 선택합니다.

7. 그러면 사용자 또는 그룹 포함 또는 제외 옵션이 표시됩니다.  **포함**이 선택되어 있는지(밑줄이 표시되어 있는지) 확인합니다.

8. **사용자 및 그룹 선택** 옵션을 선택하고 **사용자 및 그룹**을 선택합니다.  사용자 및 그룹 선택 창이 열립니다.  

9. 검색 창에 **Debra**를 입력합니다.  검색 창 아래에서 **Debra Berger**를 선택하고 페이지 아래쪽의 **선택** 단추를 누릅니다.  일반적으로는 그룹의 사용자에게 정책을 할당해야 합니다.  이 랩에서는 편의상 특정 사용자에게 정책을 할당하겠습니다. 

10. 클라우드 앱 또는 작업에서 **선택한 클라우드 앱 또는 작업 없음**을 선택합니다.

11. 그러면 클라우드 앱 또는 사용자 작업 포함 또는 제외 옵션이 표시됩니다.  **클라우드 앱**이 강조 표시되어 있고 **포함**이 선택되어 있는지(밑줄이 표시되어 있는지) 확인한 후에 **앱 선택**을 선택합니다.  클라우드 앱 선택 창이 열립니다.

12. 검색 창에 **Azure**를 입력합니다.  검색 상자 아래에 표시되는 검색 결과에서 **Microsoft Azure Management**를 선택하고 페이지 아래쪽의 **선택**을 누릅니다.  경고를 확인합니다.  

13. 조건에서 **조건 0개 선택됨**을 선택합니다.  구성할 수 있는 다양한 옵션을 살펴봅니다.  정책을 통해 위험, 디바이스 플랫폼, 위치, 클라이언트 앱, 디바이스 상태 등의 조건에서 생성되는 신호에 따라 사용자 액세스를 제어할 수 있습니다.  예를 들어 본사 네트워크 등의 신뢰할 수 있는 위치나 선택한 위치를 제외한 모든 위치에 적용하려는 정책의 조건을 포함할 수 있습니다.  이 정책에서는 조건을 설정하지 않습니다.

14. 이제 액세스 컨트롤을 설정합니다.  허용 아래에서 **컨트롤 0개 선택됨**을 선택합니다.

15. 허용 창이 열립니다.  **액세스 허용**이 선택되어 있는지 확인하고 **다단계 인증 필요**를 선택합니다.  여러 컨트롤의 경우 섹션 아래에서 기본값인 **선택한 모든 컨트롤 필요**를 유지합니다.  페이지 아래쪽의 **선택**을 누릅니다.

16. 페이지 아래쪽의 정책 사용에서 **켜기**를 선택한 후 **만들기** 단추를 누릅니다.

17. 몇 초 정도 지나면 조건부 액세스 정책 목록에 MFA 파일럿 정책이 표시됩니다(필요한 경우 페이지 위쪽의 **새로 고침** 선택).

18. Azure에서 로그아웃하고 브라우저 창을 닫습니다.

#### 작업 3: 이 작업에서는 Debra Berger 사용자로 로그인하여 조건부 액세스 정책의 영향을 확인합니다. 먼저 조건부 액세스 정책에 포함되어 있지 않은 애플리케이션에 로그인합니다.  그런 다음 조건부 액세스 정책에 포함되어 있는 애플리케이션을 대상으로 로그인 프로세스를 반복합니다.  이 정책은 사용자가 Microsoft Azure Management 애플리케이션에 액세스할 때 MFA를 진행해야 하도록 지정합니다.  MFA를 사용하려는 사용자는 먼저 MFA에서 사용할 인증 방법을 등록해야 합니다. 예를 들어 모바일 디바이스나 인증자 애플리케이션으로 코드를 전송하는 등의 방법을 선택해야 합니다.

1. Microsoft Edge를 엽니다.  브라우저의 주소 표시줄에 **https://login.microsoftonline.com/** 을 입력합니다.

1. Debra Burger로 로그인합니다.
    1. 로그인 창에 **DebraB@WWLxZZZZZZ.onmicrosoft.com**을 입력하고(여기서 ZZZZZZ는 랩 호스팅 공급자가 제공한 고유 테넌트 ID) **다음**을 선택합니다.
    1. 이전 작업에서 적어 둔 암호를 입력합니다. **로그인**을 선택합니다.
    1. 관리자가 암호를 재설정할 때 제공된 암호는 임시 암호이므로 암호를 업데이트해야 합니다(암호 업데이트는 MFA에 포함되지 않음).  현재 암호를 입력하고 새 암호와 암호 확인 필드에 **SC900-Lab**을 입력합니다.
    1. 로그인 상태를 유지할지 묻는 메시지가 표시되면 **예**를 선택합니다.

1. Microsoft 365 계정에 로그인했습니다.  이 애플리케이션은 정책 적용 대상이 아니므로 MFA를 진행할 필요가 없었습니다.

1. 이제 MFA 기준에 부합하는 애플리케이션 로그인을 시도해 보겠습니다.  Microsoft Edge를 열고 주소 표시줄에 https://portal.azure.com을 입력합니다.

1. 추가 정보가 필요하다는 창이 표시됩니다.  **다음**을 선택합니다.  그러면 MFA 등록 프로세스가 시작됩니다. 조건부 액세스 정책에 지정되어 있는 클라우드 앱에 액세스하는 것이 처음이기 때문입니다.  등록 프로세스는 한 번만 진행하면 됩니다.   관리자가 사용할 인증 방법을 구성하여 사용자가 등록 프로세스를 진행하도록 할 수도 있습니다.

1. 계정 보안 유지 창에서 MFA에 사용할 방법을 선택할 수 있습니다.  Microsoft Authenticator도 선택 가능한 옵션이지만 이 랩에서는 편의상 다른 방법을 선택합니다.  **다른 방법을 설정하고 싶습니다.**를 선택합니다.  다른 방법 선택 팝업 창에서 **드롭다운 화살표**를 선택하고 **전화**를 선택한 후에 **확인**을 선택합니다.

1. 그러면 열리는 창에서 사용자의 국가가 선택되어 있는지 확인하고 사용하려는 휴대폰 번호를 입력한 다음 선택합니다. 그런 후에 **코드를 문자로 받기**가 선택되어 있는지 확인하고 **다음**을 누릅니다.  화면에 "SMS가 확인되었습니다. 휴대폰이 등록되었습니다."가 표시됩니다.  **다음**, **완료**를 차례로 선택합니다.  그러면 1회 등록 프로세스가 완료됩니다.

1. 로그인 시간이 만료되었다는 메시지가 표시될 수도 있습니다.  그러면 암호 **SC900-Lab**을 입력하고 **로그인**을 선택하면 됩니다.

1. 그러면 나타나는 창에 휴대폰으로 전송된 코드를 입력하라는 메시지가 표시됩니다.  코드를 입력하고 **다음**을 선택합니다.  MFA 정책이 적용되는 Azure Portal 등의 Microsoft Azure Management 클라우드 애플리케이션에 액세스할 때마다 이러한 환경에서 MFA를 진행해야 합니다.

1. 즉, 휴대폰으로 전송된 코드를 입력하라는 메시지가 포함된 창이 표시됩니다.  코드를 입력하고 **확인** 단추를 선택합니다.  로그인 상태를 유지할지 묻는 메시지가 표시되면 **아니요**를 선택합니다.

1. 이제 Azure Portal에 액세스할 수 있습니다.  Azure Portal은 Microsoft Azure Management 애플리케이션이므로, 앞에서 만든 조건부 액세스 정책에 따라 다단계 인증을 진행해야 합니다.  

1. 화면 오른쪽 위의 이메일 주소 옆에 있는 사용자 아이콘을 선택한 후 로그아웃을 선택하여 로그아웃합니다. 그런 다음 브라우저 창을 모두 닫습니다.

#### 복습
이 랩에서는 Microsoft Azure Management 클라우드 애플리케이션에 액세스하는 사용자가 MFA를 진행해야 하도록 지정하는 조건부 액세스 정책 설정 프로세스를 수행했습니다.  그런 후에 사용자로 로그인하여 MFA 등록 프로세스를 진행했으며, Azure Portal에 액세스할 때 MFA를 사용하도록 지정하는 조건부 액세스 정책의 영향을 확인했습니다.
